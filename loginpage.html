<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script>
    $(document).ready(function(){
        $('#reservationForm').on('submiit', function(e){
            e.preventDefault();
            const resevationData={
                time: $('#time').val(),
                name: $('#name').val()
            };
            $ajax({
                url:  '/reserve',
                type: 'POST',
                contentType: 'application/json',
                data: JSON.stringify(reservationData),
                dataType: 'html',
                success: function(responseHtml){
                    $('#reservationForm').html(responseHtml);
                    $('h1').text('ì˜ˆì•½ ì™„ë£Œ');
                    console.log('ì˜ˆì•½ ì„±ê³µ, í™”ë©´ ì—…ë°ì´íŠ¸ ì™„ë£Œ');
                },
                error: function(jqXHR){
                    let errorMessage = 'ì˜ˆì•½ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.';
                    try {
                        const errorJson = JSON.parse(jqXHR.responseText);
                        errorMessage = errorJson.message || errorMessage;
                    } catch (e) {
                        errorMessage = `ì˜ˆì•½ ì‹¤íŒ¨ (Status ${jqXHR.status}): í•´ë‹¹ ì‹œê°„ì— ì˜ˆì•½ì´ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤.`;
                    }

                    alert(`ğŸš¨ ì˜ˆì•½ ë¶ˆê°€! \n${errorMessage}`);
                    console.error('ì˜ˆì•½ ì‹¤íŒ¨:', jqXHR.status, status);
                }
                
            });
        });

    });
    </script>
    <style>
        h1{
            color: rgb(40, 103, 128);
            font-size: 80px;
            font-size: 2rem 
        }
        body{
            text-align: left;
            padding: 50px;
            overflow-y: scroll;
        }
        input{
            padding: 4px 6px;
            margin: 10px 0;
        }
        label{
            display: inline-block;
            width: 80px;
            text-align: center;
            font-weight: bold;
            margin-right: 10px;
            padding: 3px;
            background-color: rgb(180, 217, 209);
            border: 1px solid #000;
        }
        .page-header{
            border-bottom: 4px solid #333;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        .reserved { 
            background-color: #ffe0e0;
            font-size: 2rem;
        }
        .available { 
            background-color: #f0f0f0; 
            color: #000000ff;
            font-size: 2rem;
        }
        #container {
            margin-left: auto;
            margin-right: auto;
            max-width: 600px;
            max-height: 400px;     
            overflow-y: auto;  
            border: 1px solid #ccc;
            margin-top: 10px;
            text-align: center;
        }
        footer{
            border-top: 4px solid #333;
            padding: 10px;
            margin: 20px;
        }
        #scheduleTable {
            width: 100%;
            text-align: center;
        }
    </style>
</head>
<body>
    <header class="page-header">
        <h1 >ì´ë¦„</h1>
    </header>
    <main>
        <div id="container">
            <h2>ì˜ˆì•½ í˜„í™©í‘œ</h2>
            <table id="scheduleTable">
                <thead>
                    <tr><th>ì‹œê°„</th><th>ìƒíƒœ</th></tr>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>
    </main>
    <footer>
        <h1>ì˜ˆì•½í•˜ê¸°</h1>
            <form id="reservationForm">
                <label for="time">ì˜ˆì•½ ì‹œê°„:</label>
                <input type="time" id="time" step="1800" required>
                <label for="name">ì´ë¦„:</label>
                <input type="text" id="name" required>
                <button type="submit">ì˜ˆì•½</button>
            </form>
            <script src="app.js"></script>
    </footer>
    
</body>
</html>
